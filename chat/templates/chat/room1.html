<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="refresh" content="10">
    <meta charset="utf-8"/>
    <title>Chat Room</title>
</head>
<style>
    input[type=submit]{
         background:#38EB50;
         color: white;
         width:200px;
         height:60px;
         border:green;
          border-radius:25px;
         font-weight: bold
    }

    input[type=text]{
         width:500px;
         height:30px;
          border-radius:25px;
         font-weight: bold;
         text-align:center;
    }

    .footer {
    position: fixed;
    padding-right: 3px;
    left: 0;
    bottom: 0;
    width: 100%;
    
    background-color: green;
    color: white;
    text-align: right;
    }

    #footer1 {
    position: fixed;
    left: 0;
    bottom: 0;
    width: 100%;
    height:150px;
    background-color: rgba(246, 250, 8, 0.);
    color: white;
    text-align: center;
    }

    #boxeds{
    background-color:#90EE90;
    border-color: green;
    width: 400px;
    border-radius: 25px;
    padding: 20px;
    
  }

  #heading{ 
        color:green; 
        text-align:center; 
        position:fixed;
        width:100%
    } 

            
  #boxedr{
    background-color: #FFFF99;
    border-color: black;
    width: 400px;
    border-radius: 25px;
    padding: 20px;
    
  }

  

  .chatpage{
    
    /* background: rgba(56, 235, 80,0.2); */
    padding-left: 10px;
    padding-right: 10px;
    padding-top: 10px;
    padding-bottom: 10px;
    height: 500px;
  }


</style>
<body>
    <body style="background-image: url('https://larkaiproject1.s3.ap-south-1.amazonaws.com/background.png');"></body>
    <center>
    <div class="container">
    <div id="heading" style="background-color: rgb(59, 51, 51);  padding-bottom:3px;"> 
       <h1> Room {{ room }}</h1>
    
    </div> 
        <div class ="chatpage">
            <br><br><br>    <br><br><br> 


            {% if a %}

            {% for i in a %}

            {% if i.ts == "Student" %}
            <div id="boxedr" >
                <h3>{{ i.message }}</h3>
                <h10>{{ i.dtime }}</h10><br>
                From:{{ i.ts }}
                </div>
                <br>
            {% else %}
            
            <div id="boxeds" >
                <h3>{{ i.message }}</h3>
                <h10>{{ i.dtime }}</h10><br>
                From:{{ i.ts }}
                </div>
                <br>

            {% endif %}

            {% endfor %}
    
            {% endif %}

            

  



<br><br><br><br><br><br><br><br><br><br><br>
</div>
    <!-- <textarea id="chat-log" cols="100" rows="25"></textarea><br><br> -->
    <div id="footer1">
    <form action="chatsend" method="post"> 
        {% csrf_token %}
    <input   type="text"  placeholder="Type your message here" name="msg">
    <input   type="submit" value="Send" name="room" >
    </form>
    <br><br>
    <!-- <form action="upload1" method="post" enctype="multipart/form-data">
     {% csrf_token %}

    <input type="file"  name="myfile" enctype="multipart/form-data">
    <input type="submit" value="Send" name="room">
    </form> -->
    </div>
    {{ room_name|json_script:"room-name" }}
    </div>
    <!-- <script>
        const roomName = JSON.parse(document.getElementById('room-name').textContent);

        const chatSocket = new WebSocket(
            'ws://'
            + window.location.host
            + '/ws/chat/'
            + roomName
            + '/'
        );

        chatSocket.onmessage = function(e) {
            const data = JSON.parse(e.data);
            document.querySelector('#chat-log').value += (data.message + '\n');
        };

        chatSocket.onclose = function(e) {
            console.error('Chat socket closed unexpectedly');
        };

        document.querySelector('#chat-message-input').focus();
        document.querySelector('#chat-message-input').onkeyup = function(e) {
            if (e.keyCode === 13) {  // enter, return
                document.querySelector('#chat-message-submit').click();
            }
        };

        document.querySelector('#chat-message-submit').onclick = function(e) {
            const messageInputDom = document.querySelector('#chat-message-input');
            const message = messageInputDom.value;
            chatSocket.send(JSON.stringify({
                'message': message
            }));
            messageInputDom.value = '';
        };
    </script> -->

    
    
    <script>
        function load_home() {
     document.getElementById("footer1").innerHTML='<object type="text/html" data="home.html" ></object>';
}
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>
</center>
</body>
</html>