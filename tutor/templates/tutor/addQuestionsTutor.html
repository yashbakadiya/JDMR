{% extends 'tutor/dashboardTutor.html' %}
{% load static %}
{% block css %}
{% endblock %}
{% block body %}
<style>
    #card{
        background-color:white;
        padding-bottom:3rem;
        padding-top:3rem;
        color:black;
    }
    #pills-home-tab,#pills-profile-tab{
      color: black;

    }

</style>
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
<div class="container">
    {% if errors %}
    <div class="alert alert-danger" role="alert">
        <div id='errorsBox'>
            <div>
                <h5 style="color: red;text-shadow:-0.5px -0.5px 0 #000,0.5px -0.5px 0 #000,-0.5px 0.5px 0 #000,0.5px 0.5px 0 #000;">Error !</h5>
                <ul>
                    {% for x in errors %}
                    <li>{{ x }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
        {% endif %}
    <div class="container" id="card">
    <ul class="nav nav-fill mb-3" id="pills-tab" role="tablist">
  <li class="nav-item" id='exam'>
    <a class="nav-link" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true"><i class="fas fa-clipboard-list"></i>&nbsp;&nbsp;Exams</a>
  </li>
  <li class="nav-item" id="ques">
    <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false"><i class="fas fa-plus-square"></i>&nbsp;&nbsp;Add Exam Questions</a>
  </li>
</ul>
<div class="tab-content" id="pills-tabContent">
  <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                <div class="row">
                    <!-- Grid column -->
                    <div class="col-md-8">
                        <h2 class="pt-3 pb-4 text-center font-bold font-up deep-purple-text" style="color: rgb(66, 8, 8);">List of Exams</h2>
                    </div>

                    <div class="col-md-4">
                        <input id="searchbox" type="text" class="form-control" name='srh' placeholder="Search Exam or Course" required>
                    </div>

                    <!-- Grid column -->
                </div>
                <!-- Grid row -->
                <form action="" method="post">{% csrf_token %}
                    <!--Table-->
                    <table class="table">
                        <!--Table head-->
                        <thead>
                            <tr>
                                <th>Exam Name</th>
                                <th>Course</th>
                                <th>Batch Timing</th>
                                <th>Exam Date</th>
                                <th>Exam Duration</th>
                                <th>Total No. of Questions</th>
                                <th>Pass Percentage</th>
                                <th>Exam status</th>
                                <th colspan="2">Action</th>
                            </tr>
                        </thead>
                        <!--Table head-->
                        <!--Table body-->
                        <tbody>
                            {% for i in exams %}
                            <tr>
                                <td><p style="color: black;font-size: 14px;">{{i.Name}}</p></td>
                                <td><p style="color: black;font-size: 14px;">{{i.course.courseName}}</p></td>
                                <td>{{i.Batch}}</td>
                                <td>{{i.exam_date}}</td>
                                <td>{{i.exam_duration}}</td>
                                <td>{{i.question_count}}</td>
                                <td>{{i.pass_percentage}}</td>
                                {% if i.status %}
                                <td><a href="{% url 'toggle' i.id %}" class="btn btn-danger p-1">Deactivate</a></td>
                                {% else %}
                                <td><a href="{% url 'toggle' i.id %}" class="btn btn-primary p-1">Activate</a></td>
                                {% endif %}
                                <td>
                                    <a href="{% url 'editexam' i.id %}"><i class="fas fa-edit"></i></a>
                                </td>
                                <td>
                                    <a href="{% url 'deleteexam' i.id %}"><i class="fas fa-trash"></i></a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        <!--Table body-->
                    </table>
                    <!--Table-->
                </form>
                <br>
  </div>
  <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
    <form method="post">{% csrf_token %}
        <div class="form-group">
    <label for="exampleFormControlSelect1">Select Exam</label>
    <select class="form-control" id="exampleFormControlSelect1" name="exam">
      {% for exam in exams %}
      <option value="{{exam.id}}">{{exam.Name}}</option>
      {% endfor %}
    </select>
  </div>
  <button class="btn btn-primary">Create Question</button>
    </form>
  </div>
</div>
    </div>

    <script>
        function checkbox() {
    var value = $("#negativecheck").is(":checked");
    negative = document.getElementById("negative");
    var output;
    if (value) {
      output = `<input
      type="number"
      class="mt-2 form-control"
      placeholder="Enter Negative Marks"
      name="negative_marks"
      value="0"
      required
    />
    <div class="invalid-feedback">
      Enter a valid No.
    </div>`;
    } else {
      output = "";
    }
    negative.innerHTML = output;
  }
      // In your Javascript (external .js resource or <script> tag)
$(document).ready(function() {
    $('.js-example-basic-single').select2();
});

  $("#select_course").change(function () {
    var selected = $(this).val();
    $.ajax({
      url: "{% url 'classes' %}",
      data: {
        course_id: selected,
      },
      success: function (data) {
        categories = data.sub_categories;
        $("#class_select").empty().trigger("change");
        for (i = 0; i < categories.length; i++) {
          var newOption = new Option(
            categories[i].text,
            categories[i].value,
            false,
            false
          );
          $("#class_select").append(newOption).trigger("change");
        }
      },
    });
  });


          trlist = $("tbody>tr");
        $("body").on('input',"#searchbox",function(){
            trlist.hide();
            search = this.value.toLowerCase();
            len = search.length;
            for(i=0;i<trlist.length;i++){
                if(trlist[i].children[0].textContent==""){
                    cont = cont;
                }
                else{
                    cont = trlist[i].children[0].textContent.toLowerCase();
                }
                if(cont.search(search)!=-1){
                    $(trlist[i]).show();
                }
                if(trlist[i].children[1].textContent==""){
                    cont2 = cont2;
                }
                else{
                    cont2 = trlist[i].children[1].textContent.toLowerCase();
                }
                if(cont2.search(search)!=-1){
                    $(trlist[i]).show();
                }
            }

        });

$( document ).ready(function() {
$("#exam").css("border-bottom", "2px solid black");
});

  $('#pills-home-tab').click(function(){
    $("#exam").css("border-bottom", "2px solid black");
    $("#ques").css("border-bottom", "none");
  });
   $('#pills-profile-tab').click(function(){
    $("#ques").css("border-bottom", "2px solid black");
    $("#exam").css("border-bottom", "none");
  });

    </script>

</div>
{% endblock %}
