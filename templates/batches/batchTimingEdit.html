{% extends 'dashboard/base.html' %}
{% load static %}
{% block css %}
{% endblock %}
{% block main-content %}
<style>
    #card {
        background-color: white;
        padding-bottom: 3rem;
        padding-top: 3rem;
        color: black;
    }
</style>
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<div class="mt-5">
    {% if messages %}
    {% for k in messages%}
    <div class="alert alert-{{k.tags}} alert-dismissible fade show" role="alert">
        <b>{{ k }} !</b>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% endfor %}
    {% endif %}
    <div style="padding-top: 0;" class="class" id="card">
        <div class="card-header">
            <h2 style="align-items: center;text-align: center;">Update Batch</h2>
        </div>
        <form id="frm" class="mb-4 mt-4" method="post">{% csrf_token %}
            <div class="mx-2 row" id="INSTBATCH">

                <div class="col">
                    <label for="validationCustom01"><strong> Batch Name<span class="red">*</span></strong></label>
                    <input type="text" class="form-control" id="batchName" name='batchName' placeholder="Batch Name"
                    value="{{batchObj.batchName}}">

                </div>


                <div class="col">
                    <label for="validationCustom01"><strong>Select Class <span class="red">*</span></strong></label>
                    


                    <select id="forclass" name='forclass' style="width: 100%;"  class="js-example-basic-single form-control" onchange="selectclass()">
                        <option class="form-control" selected disabled value="{{batchObj.Class}}">{{batchObj.Class}}</option>
                        {% for i in classes %}
                        <option class="form-control form-control-lg" value="{{ i.0 }}">{{i.0}} </option>
                        {% endfor %}
                    </select>
                    
                    <!-- <select id="class_select" name="class" style="width: 100%;" class="js-example-basic-single form-control" onchange="selectclass()">
                        <option class="form-control" selected disabled value="{{exam.Class}}">{{exam.Class}}</option>
                        {% for class in classes %}
                        <option class="form-control" value="{{class.0}}">{{class.0}}</option>
                        {% endfor %}
                      </select> -->


                </div>
                <div class="col">
                    <label for="validationCustom01"><strong>Select Course<span class="red">*</span></strong></label>
                    <select id="courseName" name="courseName" style="width: 100%"
                        class="js-example-basic-single form-control">
                        <option class="form-control form-control-lg" selected disabled value="{{batchObj.course.id}}">{{batchObj.course.courseName}}</option>
                    </select>
                </div>
                
            </div>
            <div class="mx-2 row mt-4">


                <div class="col">
                    <label for="validationCustom01"><strong>Start Time <span class="red">*</span></strong></label>
                    <input class="form-control" type="time" placeholder="" name="startTime"  value="{{batchObj.startTime|date:'H:i'}}" /><br />
                    
                    <div class="invalid-feedback">
                        Select a valid Time!
                    </div>
                </div>

                <div class="col">
                    <label for="validationCustom01"><strong>End Time <span class="red">*</span></strong></label>
                    <input class="form-control" type="time" placeholder="" name="endTime" value="{{batchObj.endtime|date:'H:i'}}" /><br />
                    <div class="invalid-feedback">
                        Select a valid Time!
                    </div>
                </div>

                <div class="col">
                    <label for="validationCustom01"><strong>Select Days <span class="red">*</span></strong></label>

                    <div>
                        <select class="form-control " data-actions-box="true" id="days" name='fordays' value="{{batchObj.days}}" >
                            <option value="disabled">Day</option>
                            <option value="Sunday">Sunday</option>
                            <option value="Monday">Monday</option>
                            <option value="Tuesday">Tuesday</option>
                            <option value="Wednesday">Wednesday</option>
                            <option value="Thursday">Thursday</option>
                            <option value="Friday">Friday</option>
                            <option value="Saturday">Saturday</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-primary"> Submit </button>
            </div>
        </form>
    </div>
    <script>
        function checkbox() {
            var value = $("#negativecheck").is(":checked");
            negative = document.getElementById("negative");
            var output;
            if (value) {
                output = `<input
  type="number"
  class="mt-2 form-control"
  placeholder="Enter Negative Marks"
  name="negative_marks"
  {% if exam.negative_marks %}
  value="{{exam.negative_marks|floatformat}}"
  {% else %}
  value="0"
  {% endif %}
  required
/>
<div class="invalid-feedback">
  Enter a valid No.
</div>`;
            } else {
                output = "";
            }
            negative.innerHTML = output;
        }
        // In your Javascript (external .js resource or <script> tag)
        $(document).ready(function () {
            checkbox();
            $('.js-example-basic-single').select2();
        });


        function selectclass() {
            var selected = $("#class_select").val();
            $.ajax({
                url: "{% url 'findCourse' %}",
                data: {
                    forclass: selected,
                },
                success: function (data) {
                    courses = data.courses;
                    console.log(courses)
                    $("#select_course").empty().trigger("change");
                    for (i = 0; i < courses.length; i++) {
                        var newOption = new Option(
                            courses[i][1],
                            courses[i][0],
                            false,
                            false
                        );
                        $("#select_course").append(newOption).trigger("change");
                    }
                },
            });
        }
    </script>
</div>
{% endblock main-content %}