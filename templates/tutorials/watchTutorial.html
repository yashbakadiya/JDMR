{% extends 'dashboard/dashboard.html' %}
{% load static %}
{% block css %}
<style media="screen">
  .container {
    max-width: 1250px;
    width: 100%;
  }

  #my-video {
    width: 100%;
    padding-right: 15px;
  }
</style>
{% endblock %}
{% block body %}
<main>
  <div class="container mt-4">
    {% if messages %}
    {% for k in messages%}
    <div class="alert alert-{{k.tags}} alert-dismissible fade show" role="alert">
      <b>{{ k }} !</b>
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    {% endfor %}
    {% endif %}
    <div class="card mb-4">
      <div class="card-body">
        <div class="row ml-1">
          <video id="my-video" controls height="364">
            <source id="nowplaying" src="{{start}}" />
          </video>
        </div>
        {% if tutorial.playlist.all %}
        <div class="row mt-3 ">
          <div class="col-4">
            <div id="accordion" style="height: 100%;overflow: scroll;">

              {% for item  in tutorial.playlist.all %}
              <div class="card">
                <div class="card-header" id="heading">
                  <h5 class="mb-0">
                    <button class="btn btn-link" data-toggle="collapse" data-target="#collapse{{item.id}}"
                      aria-expanded="true" aria-controls="collapseOne">
                      {{ item.Title}}
                    </button>
                  </h5>
                </div>
                <div id="collapse{{item.id}}" class="collapse show" aria-labelledby="headingOne"
                  data-parent="#accordion">
                  <div class="card-body">
                    {{item.Description}}
                    <div class="container p-0">
                      <button class="btn text-dark mr-5" onclick="myFunction('{{item.Video.url}}')"><i
                          class="fas fa-play" style="font-size:12px;color: black;"></i></button>
                      <a class="ml-5 pl-5" href="{% url 'editTutorialvideos' item.id %}"><i class="fas fa-edit"></i></a>
                      <a class="ml-2" href="{% url 'deleteplaylistvideo' item.id %}"><i class="fas fa-trash"></i></a>
                    </div>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>
          <div class="col-8">
            <div class="jumbotron text-dark">
              <h2 class="text-dark">Course Content</h2>
              <p>{{tutorial.playlist.all.count}} lectures â€¢ {{total_length}}</p>
              {{tutorial.Description}}
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
</main>
<script>
  function myFunction(data) {
    var video = document.getElementsByTagName('video')[0];
    var play = document.getElementsByTagName('source')[0];
    play.src = data;
    video.load();
  }
</script>
{% endblock %}